# План автоматизации тестирования веб-сервиса покупки туров

## Перечень автоматизируемых сценариев

### Позитивные сценарии

#### 1. Оплата тура с валидной картой со статусом “APPROVED” 1
- **Действия**: Перейти на сайт `http://localhost:8080/`, нажать кнопку с текстом "Купить", в поле "Номер карты" ввести 4444 4444 4444 4441, в поле "Месяц" ввести 01, в поле "Год" ввести 26, в поле "Владелец" ввести Test, в поле "CVC/CVV" ввести 111, нажать кнопку "Продолжить".
- **Ожидаемый результат**: 
  - Появление всплывающего окна с текстом “Операция одобрена Банком.”, запись со статусом “APPROVED” в Response по API.

#### 2. Оплата тура с валидной картой со статусом “APPROVED” 2
- **Действия**: Перейти на сайт `http://localhost:8080/`, нажать кнопку с текстом "Купить", в поле "Номер карты" ввести 4444 4444 4444 4441, в поле "Месяц" ввести 01, в поле "Год" ввести 31, в поле "Владелец" ввести Test, в поле "CVC/CVV" ввести 111, нажать кнопку "Продолжить".
- **Ожидаемый результат**: 
  - Появление всплывающего окна с текстом “Операция одобрена Банком.”, запись со статусом “APPROVED” в Response по API.

#### 3. Оплата тура в кредит с валидной картой со статусом “APPROVED”
- **Действия**: Перейти на сайт `http://localhost:8080/`, нажать кнопку с текстом "Купить в кредит", в поле "Номер карты" ввести 4444 4444 4444 4441, в поле "Месяц" ввести 01, в поле "Год" ввести 26, в поле "Владелец" ввести Test, в поле "CVC/CVV" ввести 111, нажать кнопку "Продолжить".
- **Ожидаемый результат**: 
  - Появление всплывающего окна с текстом “Операция одобрена Банком.”, запись со статусом “APPROVED” в Response по API.

### Негативные сценарии

#### 4. Ввод невалидного номера карты 1
- **Действия**: Перейти на сайт `http://localhost:8080/`, нажать кнопку с текстом "Купить", в поле "Номер карты" ввести 4444 4444 4444 4442, в поле "Месяц" ввести 01, в поле "Год" ввести 26, в поле "Владелец" ввести Test, в поле "CVC/CVV" ввести 111, нажать кнопку "Продолжить".
- **Ожидаемый результат**:
  - Появление всплывающего окна с текстом “Ошибка. Банк отказал в проведении операции.”, запись со статусом “REJECTED” в Response по API.

#### 5. Ввод невалидного номера карты 2
- **Действия**: Перейти на сайт `http://localhost:8080/`, нажать кнопку с текстом "Купить", в поле "Номер карты" ввести 4444 4444 4444 4443, в поле "Месяц" ввести 01, в поле "Год" ввести 26, в поле "Владелец" ввести Test, в поле "CVC/CVV" ввести 111, нажать кнопку "Продолжить".
- **Ожидаемый результат**:
  - Появление всплывающего окна с текстом “Ошибка. Банк отказал в проведении операции.”, код ответа сервера 500, "message": "Internal Server Error".

#### 6. Ввод невалидного срока действия карты (месяц)
- **Действия**: Перейти на сайт `http://localhost:8080/`, нажать кнопку с текстом "Купить", в поле "Номер карты" ввести 4444 4444 4444 4441, в поле "Месяц" ввести 00, в поле "Год" ввести 26, в поле "Владелец" ввести Test, в поле "CVC/CVV" ввести 111, нажать кнопку "Продолжить".
- **Ожидаемый результат**:
  - Под полем "Месяц" появляется сообщение "Неверно указан срок действия карты".

#### 7. Ввод невалидного "CVC/CVV"
- **Действия**: Перейти на сайт `http://localhost:8080/`, нажать кнопку с текстом "Купить", в поле "Номер карты" ввести 4444 4444 4444 4441, в поле "Месяц" ввести 01, в поле "Год" ввести 26, в поле "Владелец" ввести Test, в поле "CVC/CVV" ввести 11, нажать кнопку "Продолжить".
- **Ожидаемый результат**:
  - Под полем "CVC/CVV" появляется сообщение "Неверный формат".

#### 8. Пустое поле "Владелец"
- **Действия**: Перейти на сайт `http://localhost:8080/`, нажать кнопку с текстом "Купить", в поле "Номер карты" ввести 4444 4444 4444 4441, в поле "Месяц" ввести 01, в поле "Год" ввести 26, поле "Владелец" оставить пустым, в поле "CVC/CVV" ввести 111, нажать кнопку "Продолжить".
- **Ожидаемый результат**:
  - Под полем "Владелец" появляется сообщение "Поле обязательно для заполнения".

#### 9. Ввод данных просроченной карты
- **Действия**: Перейти на сайт `http://localhost:8080/`, нажать кнопку с текстом "Купить", в поле "Номер карты" ввести 4444 4444 4444 4441, в поле "Месяц" ввести 01, в поле "Год" ввести 24, в поле "Владелец" ввести Test, в поле "CVC/CVV" ввести 111, нажать кнопку "Продолжить".
- **Ожидаемый результат**:
  - Под полем "Год" появляется сообщение "Истек срок действия карты".


## Перечень используемых инструментов с обоснованием выбора

| Инструмент | Обоснование выбора                                                       |
|------------|--------------------------------------------------------------------------|
| **Pytest** | Фреймворк для тестирования кода на Python                                |
| **PyCharm** | Интегрированная среда разработки (IDE) для языка программирования Python |
| **Selenium** | Фреймворк для автоматизации действий веб-браузера                        |
| **Allure** | Создание наглядных и информативных отчетов                               |
| **Docker** | Контейнеризация тестового окружения и БД                                 |
| **GitHub** | Контроль версий и CI/CD интеграция                                       |
| **MySQL/PostgreSQL** | Тестовые БД для проверки записей                                         |

## Перечень возможных рисков при автоматизации

1. **Частые изменения UI** - потребует постоянного обновления селекторов
2. **Недоступность банковских сервисов** - необходимость mock-серверов
3. **Отсутствие тестовых данных** - сложность эмуляции ответов банков
4. **Сложность работы с СУБД** - настройка тестовой базы
5. **Кросс-браузерные различия** - необходимость тестирования в разных браузерах
6. **Долгое время выполнения** - ожидание ответов от внешних сервисов

## Интервальная оценка с учётом рисков (в часах)

| Этап работ | Оптимистично | Реалистично | Пессимистично |
|------------|-------------|-------------|---------------|
| Настройка окружения | 8 | 12 | 16 |
| Базовая архитектура | 12 | 16 | 20 |
| Позитивные тесты | 16 | 20 | 24 |
| Негативные тесты | 20 | 24 | 28 |
| Интеграция с СУБД | 8 | 12 | 16 |
| Настройка отчетности | 8 | 12 | 16 |
| Отладка и исправления | 12 | 16 | 20 |
| **Итого** | **84** | **112** | **140** |

**Общая оценка: 112 часов (14 рабочих дней)**

## План сдачи работ

### Неделя 1
- Настройка тестового окружения
- Создание базовой архитектуры тестов

### Неделя 2
- Реализация позитивных сценариев
- Интеграция с тестовой СУБД

### Неделя 3
- Реализация негативных сценариев
- Настройка Allure отчетности
- Промежуточный прогон тестов

### Неделя 4
- Финальная отладка тестов
- Полный прогон всех сценариев
- Подготовка итоговой отчетности

**Готовность автотестов**: 28 дней с момента начала работ